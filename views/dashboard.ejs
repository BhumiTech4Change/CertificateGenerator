<h1 class="mt-4" style="color: rgb(42, 49, 56); font-weight: bolder; font-family: 'Lato';">Welcome <%= name %> <img src="https://www.pinclipart.com/picdir/big/58-589787_human-resource-intern-bhumi-ngo-chennai-hd-clipart.png" id="logo"></h1>

<h4 class="mt-4" style="color: rgb(14, 77, 136); font-weight: bolder;float: left; font-family: 'Lato';"> Your send limit: <%= lim %> </h4>
<h4 class="mt-4" style="color: rgb(14, 77, 136); font-weight: bolder;text-align: right; font-family: 'Lato';"><a
        style="color:rgb(14, 77, 136);font-family: 'Lato';" href="../aboutus/page.html">About Us</a></h4>

<style>
    .loader {
        margin: 8px 48%;
        text-align: center;
        border: 8px solid #f3f3f3;
        border-radius: 50%;
        border-top: 8px solid #3498db;
        width: 40px;
        height: 40px;
        -webkit-animation: spin 2s linear infinite;
        /* Safari */
        animation: spin 2s linear infinite;
    }

    /* Safari */
    @-webkit-keyframes spin {
        0% {
            -webkit-transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
        }
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .progress-bar {
        height: 35px;
        width: 350px;
        /* border: 2px solid darkblue; */
        margin: 0% 35%;
        border-radius: 20px;
       background-color:  rgb(11, 86, 111);
       max-width: -webkit-fill-available;
    }

    .progress-bar-fill {
        height: 100%;
        width: 0%;
        background: seagreen;
        display: flex;
        align-items: center;
        transition: width 0.25s;
    }

    .progress-bar-text {
        margin-left: 160px;
        font-weight: bold;
        color: white;
    }
    .progress-bar1 {
        height: 35px;
        width: 350px;
        /* border: 2px solid darkblue; */
        margin: 0% 35%;
        border-radius: 20px;
        background-color:  rgb(11, 86, 111);
        max-width: -webkit-fill-available;
    }

    .progress-bar-fill1 {
        height: 100%;
        width: 0%;
        background: seagreen;
        display: flex;
        align-items: center;
        transition: width 0.25s;
        border-radius: 20px;
    }

    .progress-bar-text1 {
        margin-left: 160px;
        font-weight: bold;
        color: white;
        
    }

    .progress-bar2 {
        height: 35px;
        width: 350px;
        margin: 0% 35%;
        border-radius: 20px;
        background-color:  rgb(11, 86, 111);
        max-width: -webkit-fill-available;
    }

    .progress-bar-fill2 {
        height: 100%;
        width: 0%;
        background: seagreen;
        display: flex;
        align-items: center;
        transition: width 0.25s;
        border-radius: 20px;
    }

    .progress-bar-text2 {
        margin-left: 160px;
        font-weight: bold;
        color: white;
    }

    h2{
font-family: 'Lato';
padding-bottom: 30px;

    }
    i{
        color: white;
    }
    input[type="file"] {
    display: none;
    }

    .custom-file-upload {
    border: 1px solid black;
    display: inline-block;
    padding: 6px 12px;
    cursor: pointer;
    color: white;
    font-family: 'Lato';
    border-radius: 20px;
    background-color: black;
    margin-right: 50px;
    height: 40px;

}
#step1{
padding-bottom: 10px;
padding-top: 40px;
}

#logo{
height: 80px;
width: 80px;
position: relative;
left: 750px;

}


</style>
<!-- <p class="lead mb-3">Welcome <%= name %></p> -->

<!-- <h2>Upload the Certificate Image</h2>
<form method="post" action="/uploadCertificate" enctype="multipart/form-data">
    <input type="file" name="image"/>
    <input type="submit" value="upload"/>
</form> -->

<div class="row mt-5">
    <div class="card card-body text-center" style="background-image: url(https://image.freepik.com/free-vector/abstract-soft-holographic-background-pastel-light-colors_108964-245.jpg); background-repeat:no-repeat; background-size: cover; border-radius: 20px; width: 300px;">
        <strong><h2 style="font-size: 45px; padding-bottom: 40px;font-weight: bold;">Get Started</h2></strong>
        <h2 id="step1">Step 0 (Optional)</h2>
        <h2 class="mt-4 mb-4">Upload a Font :</h2>
        <form class="mb-4" id="uploadForm">
            <label for="file-upload" class="custom-file-upload">
                <i class="fa fa-cloud-upload"></i> &nbsp&nbspChoose File
            </label>
            <input type="file" name="fontFamiliy" accept=".ttf" / id="file-upload"> 
            
            <input type="submit" value="upload"/
            style="border-radius: 20px; width: 130px; height: 40px;background-color: black;color: white; border: none; font-family: 'Lato'; font-weight: bold;">
       
       
        </form>
        <div class="progress-bar" id="progressBar">
            <div class="progress-bar-fill" id="ola">
                <span class="progress-bar-text">0%</span>
            </div>
        </div>
        <br>
        <h2 id="step1" style="padding-top: 85px;">Step 1*</h2>
        <h2 class="mt-4 mb-4">Upload the Excel File :</h2>
        <form class="mb-4" id="uploadForm1">
            <label for="fileInput" class="custom-file-upload">
                <i class="fa fa-cloud-upload"></i> &nbsp&nbspChoose File
            </label>
            <input type="file" name="excel" accept=".xls,.xlsx,.csv,.dbf,.dif," id="fileInput" />
            <input type="submit" id="btn1" value="upload"/
            style="border-radius: 20px; width: 130px; height: 39px;background-color: black;color: white; border: none; font-family: 'Lato'; font-weight: bold;">
        </form>
        <div class="progress-bar1" id="progressBar1">
            <div class="progress-bar-fill1" id="ola1">
                <span class="progress-bar-text1">0%</span>
            </div>
        </div>
        <!-- <br>
        <h2 id="step1" style="padding-top: 85px;">Step 2*</h2>
        <h2 class="mt-4 mb-4">Upload the Text File :</h2>
        <form class="mb-4" id="uploadForm2">
            <label for="textFile" class="custom-file-upload">
                <i class="fa fa-cloud-upload"></i> &nbsp&nbspChoose File
            </label>
            <input type="file" name="text" accept=".txt," id="textFile" />
            <input type="submit" id="btn4" value="upload"/
            style="border-radius: 20px; width: 130px; height: 39px;background-color: black;color: white; border: none; font-family: 'Lato'; font-weight: bold;">
        </form>
        <div class="progress-bar2" id="progressBar2">
            <div class="progress-bar-fill2" id="ola2">
                <span class="progress-bar-text2">0%</span>
            </div>
        </div> -->
        <br>
        <h2 id="step1" style="padding-top: 85px;">Step 3*</h2>
        <h2 class="mt-4 mb-4">Upload the image file :</h2>
        <form class="mb-4" method="post" action="/uploadCertificate" enctype="multipart/form-data">
            
            <label for="btn2" class="custom-file-upload">
                <i class="fa fa-cloud-upload"></i> &nbsp&nbspChoose File
            </label>
            <input type="file" id="btn2" accept="image/*" name="image" disabled />
            <input type="submit" id="btn3" value="upload" disabled onClick="turnOnLoader()" /
            style="border-radius: 20px; width: 130px; height: 39px;background-color: black;color: white; border: none; font-family: 'Lato'; font-weight: bold;">
            <div class="loader" id="loading2" style="text-align: center;"></div>
        </form>
    </div>
</div>

<div class="row mt-5" style="float: right;">
    <a style="padding: 20px 30px 20px 30px; font-size: 20px; border-radius: 3px; font-family: 'Lato'; height: 60px;" href="/users/logout" class="btn btn-secondary">Logout</a>
</div>

<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.0.js"></script>

<script type="text/javascript">
    // $(document).ready(
    // function(){
    //     $('input:file').change(
    //         function(){
    //             if ($(this).val()) {
    //                 $('input:submit').attr('disabled',false);
    //                 $('input:file').attr('disabled', false);
    //                 // or, as has been pointed out elsewhere:
    //                 // $('input:submit').removeAttr('disabled'); 
    //             } 
    //         }
    //         );        
    // });
    ///////////////Progress Bar 0///////////////	
    const uploadForm = document.getElementById("uploadForm")	
    // const inpFile = document.getElementById("inpFile")	
    const progressBarFill = document.getElementById("ola")	
    const progressBarText = document.querySelector(".progress-bar-text")	
    uploadForm.addEventListener("submit", uploadFiler)	
    function uploadFiler(e) {	
        e.preventDefault() // this will prevent the default behaviour of the browser i.e uploading file	
        const xhr = new XMLHttpRequest()	
        xhr.open("POST", "/uploadingFont")	
        xhr.upload.addEventListener("progress", e => {	
            console.log(e)	
            const percent = e.lengthComputable ? (e.loaded/e.total)*100:0	
            console.log("Percentage:"+percent+"%")	
            progressBarFill.style.width = percent.toFixed(2) + "%"	
            progressBarText.textContent = percent.toFixed(2) + "%"	
        })	
        // xhr.setRequestHeader("Content-Type", "multipart/form-data")	
        xhr.send(new FormData(uploadForm))	
    }	
    //////////////////////////////////////////

    ///////////////Progress Bar 1///////////////	
    const uploadForm1 = document.getElementById("uploadForm1")	
    // const inpFile = document.getElementById("inpFile")	
    const progressBarFill1 = document.getElementById("ola1")	
    const progressBarText1 = document.querySelector(".progress-bar-text1")	
    uploadForm1.addEventListener("submit", uploadFiler1)	
    function uploadFiler1(e) {	
        e.preventDefault() // this will prevent the default behaviour of the browser i.e uploading file	
        const xhr = new XMLHttpRequest()	
        xhr.open("POST", "/resize/uploads/excel")	
        xhr.upload.addEventListener("progress", e => {	
            console.log(e)	
            const percent = e.lengthComputable ? (e.loaded/e.total)*100:0	
            console.log("Percentage:"+percent+"%")	
            progressBarFill1.style.width = percent.toFixed(2) + "%"	
            progressBarText1.textContent = percent.toFixed(2) + "%"	
        })	
        // xhr.setRequestHeader("Content-Type", "multipart/form-data")	
        xhr.send(new FormData(uploadForm1))	
    }	
    //////////////////////////////////////////  Text File upload
    // const uploadForm2 = document.getElementById("uploadForm2")
    // const progressBarFill2 = document.getElementById("ola2")	
    // const progressBarText2 = document.querySelector(".progress-bar-text2")	
    // uploadForm2.addEventListener("submit", uploadFiler2)
    // function uploadFiler2(e) {
    //     e.preventDefault()
    //     const xhr = new XMLHttpRequest()
    //     xhr.open("POST", "/textupload")
    //     xhr.upload.addEventListener("progress", e => {	
    //         console.log(e)	
    //         const percent = e.lengthComputable ? (e.loaded/e.total)*100:0	
    //         console.log("Percentage:"+percent+"%")	
    //         progressBarFill2.style.width = percent.toFixed(2) + "%"	
    //         progressBarText2.textContent = percent.toFixed(2) + "%"	
    //     })
    //     xhr.send(new FormData(uploadForm2))
    // }
    //////////////////////////////////////////// 

    ////////////////////////////////////////////
    var ele = document.getElementById("loading2")
    ele.style.display = "none"
    function turnOnLoader() {
        ele.style.display = "block"
    }

    $(function () {
        var btn = $('#btn1');
        btn2 = $('#btn2');
        btn3 = $('#btn3');
        btn.on("click", function (e) {
            btn2.prop("disabled", false);
            btn3.prop("disabled", false);
        });
    });

    function uploadFont() {
        alert("The Font has been Uploaded!")
    }
    function uploadCsv() {
        alert("the CSV/Excel file has been uploaded!")
    }

    function csvRun() {
        setTimeout(uploadCsv, 1000)
    }

    function fontRun() {
        setTimeout(uploadFont, 1000)
    }

</script>